data:
  root_folder: tests/data
  recordings: neuropixel.bin
  geometry: neuropixel_channels.npy

recordings:
  dtype: int16
  sampling_rate: 30000
  n_channels: 10
  spatial_radius: 70
  spike_size_ms: 1

# TURN ON/OFF MODULES
# 0 for filtered recording
doFilter: True
doTriage: True
doCoreset: True
doWhitening: True

methods:
  # 'nn' for neural net detction, 'threshold' for amplitdue threshold detection
  detection: threshold
  # 'MFM' for mixture of finite mixture clustering, 'dpmm' for dirichlete process mixture model
  clustering: MFM


# PREPROCESS
# max. memory allowed for loading recording (in bytes)
maxMem: 1000000000
# [0,1] to use parital data to estimate templates
partialDat: 1
# determine whitening matrix in each minibatch
whitenBatchwise: 0
# number of features for dimension reduction
nFeat: 3

triage:
  nearest_neighbors: 20
  percent: 0.01


# CORESET
# Num. of clusters
coresetK: 10
# distance threshold
coresetTh: 0.95

# CLUSTERING
# Masking threshold
maskTh: [0.9, 0.5]
# Num. of new clusters in split
kSplit: 5

# TEMPLATE MERGING
# threshold for template merge
tMergeTh: [0.8, 0.7]

deconvolution:
  rank: 3
  threshold: 4
  lambda: 20

# Neural network parameters
neural_network:
  aeFilename: ae_31.ckpt
  nnTriageFilename: triagenet1.ckpt

  # NN architecture
  # num. of filters in each layer
  nnNFilters: [16, 8, 1]
  # temporal filter size
  nnFilterSize: [31, 1, 1]  
  
  nnTriageFilterSize: [8, 16]  
  